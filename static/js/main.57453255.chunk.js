(this.webpackJsonpswipemein=this.webpackJsonpswipemein||[]).push([[0],{44:function(e,t,n){},51:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n(22),s=n.n(c),a=(n(44),n(31)),r=n(6),o=n(7),l=n(8),d=n(10),j=n(9),u=function(e){var t=new Date(1e3*e);return t.toLocaleDateString()+", "+t.toLocaleTimeString()},h=function(e){return e.sort((function(e,t){return e.swipeTime-t.swipeTime}))},b=n(1),O=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,null,[{key:"getRedirectUrl",value:function(){var e="https://oidc.mit.edu/authorize?response_type=code";return[["client_id",this.clientID],["redirect_uri",this.redirectURI],["scope",this.scope]].forEach((function(t){var n=t[0],i=t[1];e+="&"+n+"="+i})),e}},{key:"login",value:function(e){console.log(e)}},{key:"requestToken",value:function(e){var t=this,n=new XMLHttpRequest;n.onreadystatechange=function(){return t.receiveToken(n)},n.open("POST","https://oidc.mit.edu/token"),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.responseType="json";var i="grant_type=authorization_code";i+="&code="+e,i+="&redirect_uri=https://swipemein.github.io/",i+="&client_id=8fbfe55e-51b6-40df-a8e2-0a38690e2a9f",i+="&client_secret=D1vTFSOtY8zdbsiliGbDWf8tJCMtJ7IWPkLyROnp4yxhgpQWqeBRQWGRjj6NEFl_M4dt5k9dvgAA8k4v2poWxQ",n.send(i)}},{key:"receiveToken",value:function(e){var t=this;if(e.readyState===XMLHttpRequest.DONE){var n=new XMLHttpRequest;n.onreadystatechange=function(){return t.getUserInfo(n)},n.open("GET","https://oidc.mit.edu/userinfo"),n.setRequestHeader("Authorization","Bearer "+e.response.access_token),n.responseType="json",n.send()}}},{key:"getUserInfo",value:function(e){if(e.readyState===XMLHttpRequest.DONE){var t=e.response;localStorage.setItem(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SUB_ID,t.sub),window.location.reload()}}},{key:"logOut",value:function(){localStorage.removeItem(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SUB_ID)}},{key:"isLoggedIn",value:function(){return null!==localStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SUB_ID)}},{key:"redirectLogin",value:function(){return Object(b.jsx)(r.a,{to:"/login",exact:!0})}}]),e}();O.clientID="8fbfe55e-51b6-40df-a8e2-0a38690e2a9f",O.responseType="code",O.scope="openid profile email",O.redirectURI="https://swipemein.herokuapp.com/token";var p=O,x=n(57),m=n(58),f=(n(17),n(51),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={loggedIn:!(null===localStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SUB_ID))},i}return Object(l.a)(n,[{key:"render",value:function(){var e;return e=this.state.loggedIn?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(x.a.Link,{href:"/#/dashboard",children:"Dashboard"}),Object(b.jsx)(x.a.Link,{href:"/#/profile",children:"Profile"}),Object(b.jsx)(x.a.Link,{href:"/",onClick:function(){return p.logOut()},children:"Logout"})]}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(x.a.Link,{href:p.getRedirectUrl(),children:"Login"})}),Object(b.jsxs)(m.a,{children:[Object(b.jsx)(m.a.Brand,{href:"/",children:"SwipeMeIn"}),Object(b.jsx)(m.a.Collapse,{children:Object(b.jsx)(x.a,{className:"ml-auto",children:e})})]})}}]),n}(i.Component)),v=n(60),w=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var i;Object(o.a)(this,n),i=t.call(this,e);var c=window.location.href;if(c.includes("code")&&null===localStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SUB_ID)){var s=c.split("?")[1].split("#")[0].split("=")[1];p.login(s)}return i}return Object(l.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(f,{}),Object(b.jsxs)("div",{className:"container-fluid homephotos",children:[Object(b.jsx)("div",{className:"hometitle container",children:Object(b.jsx)("h2",{children:"SwipeMeIn"})}),Object(b.jsx)("div",{className:"homeinfo container-fluid",children:Object(b.jsxs)("div",{className:"col-xs-4 homedescription",children:[Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("h3",{children:"What is SwipeMeIn?"})}),Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("p",{children:"We\u2019ve all been there: it\u2019s 7 PM, you\u2019re on campus, and you\u2019re hungry. You have two options: spend an absurd amount of money for on-campus dining or ask a friend to lend you a swipe."}),Object(b.jsx)("p",{children:"With meal plan minimums increasing and limited swipe donation programs to take advantage of, countless students end each year with extra swipes that are wasted. SwipeMeIn is a platform for those with extra swipes to make the most of their surplus and the hungry to score a free meal."})]}),Object(b.jsxs)("div",{className:"homedirections row container",children:[Object(b.jsx)("div",{className:"col",children:Object(b.jsx)(g,{title:"Log in",text:"Log in using your kerberos in OIDC."})}),Object(b.jsx)("div",{className:"col",children:Object(b.jsx)(g,{title:"Add/Claim a Swipe",text:"Say where and when you'll eat, or find a place and time that works for your stomach."})}),Object(b.jsx)("div",{className:"col",children:Object(b.jsx)(g,{title:"Get Swiped!",text:"Eat!"})})]})]})})]})]})}}]),n}(i.Component),g=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(b.jsx)(v.a,{children:Object(b.jsxs)(v.a.Body,{children:[Object(b.jsx)(v.a.Title,{children:this.props.title}),Object(b.jsx)(v.a.Text,{children:this.props.text})]})})}}]),n}(i.Component),S=n(56),y=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={student:{},ownedSwipes:null,claimedSwipes:null},i}return Object(l.a)(n,[{key:"render",value:function(){var e,t;if(!p.isLoggedIn())return p.redirectLogin();var n=this.state.student;return Object(b.jsxs)("div",{children:[Object(b.jsx)(f,{}),Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("h1",{className:"pagetitle",children:"Profile"})}),Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h5",{children:"Info"}),Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)(S.a,{children:[Object(b.jsxs)(S.a.Group,{children:[Object(b.jsx)(S.a.Label,{children:"Name:"}),Object(b.jsx)(S.a.Control,{placeholder:n.name})]}),Object(b.jsxs)(S.a.Group,{children:[Object(b.jsx)(S.a.Label,{children:"Email:"}),Object(b.jsx)(S.a.Control,{type:"email",placeholder:n.email})]})]})}),Object(b.jsxs)("div",{className:"container row",id:"profilefooter",children:[Object(b.jsxs)("div",{className:"col-xs-4",children:[Object(b.jsx)("h5",{children:"Your swipes"}),Object(b.jsx)("div",{className:"container",children:null!==(e=this.state.ownedSwipes)&&void 0!==e?e:"None"})]}),Object(b.jsxs)("div",{className:"col-xs-4",children:[Object(b.jsx)("h5",{children:"Swipes you've claimed"}),Object(b.jsx)("div",{className:"container",children:null!==(t=this.state.claimedSwipes)&&void 0!==t?t:"None"})]})]})]})})]})}}]),n}(i.Component),_=n(55),T=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={swipe:i.props.swipe},i}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.swipe;return Object(b.jsx)("div",{className:"swipecard container",children:Object(b.jsx)("div",{className:"col-xs-4",children:Object(b.jsx)(v.a,{children:Object(b.jsxs)(v.a.Body,{children:[Object(b.jsx)(v.a.Title,{children:e.location}),Object(b.jsx)(v.a.Subtitle,{children:u(e.swipeTime)}),Object(b.jsx)(v.a.Text,{}),Object(b.jsx)(_.a,{children:"Claim Swipe"}),Object(b.jsx)(v.a.Link,{href:"/#/swipeinfo/"+e.id,children:"Info"})]})})})})}}]),n}(i.Component),k=["Maseeh","McCormick","Baker","Next","Simmons","New Vassar"],N=n(59),E=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={swipes:[]},i}return Object(l.a)(n,[{key:"getFilteredResults",value:function(e){e.preventDefault();var t={locations:[]};k.forEach((function(e){document.getElementById(e).checked&&t.locations.push(e)})),this.getSwipes(t)}},{key:"getSwipes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};fetch("https://swipemein.herokuapp.com/getswipes?filters="+JSON.stringify(t)).then((function(e){return e.json()})).then((function(t){var n=h(Object.values(t)).map((function(e){return Object(b.jsx)(T,{swipe:e},e.id)}));e.setState({swipes:n})}))}},{key:"makeCheckboxes",value:function(e){var t=[];return e.forEach((function(e){t.push(Object(b.jsx)(S.a.Check,{type:"checkbox",label:e,id:e,name:e,defaultChecked:!0},e))})),t}},{key:"componentDidMount",value:function(){this.getSwipes()}},{key:"render",value:function(){var e=this;if(!p.isLoggedIn())return p.redirectLogin();var t=this.state.swipes,n=this.makeCheckboxes(k);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f,{}),Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("h1",{className:"pagetitle",children:"Swipe Dashboard"})}),Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:"row container",id:"middashboard",children:[Object(b.jsx)("div",{className:"col",children:Object(b.jsx)(N.a,{children:Object(b.jsxs)(v.a,{children:[Object(b.jsx)(v.a.Header,{children:Object(b.jsx)(N.a.Toggle,{as:_.a,eventKey:"0",children:"Filters"})}),Object(b.jsx)(N.a.Collapse,{eventKey:"0",children:Object(b.jsx)(v.a.Body,{children:Object(b.jsxs)(S.a,{onSubmit:function(t){return e.getFilteredResults(t)},id:"filterform",name:"filterform",children:[Object(b.jsx)("h2",{children:"Dining Halls:"}),Object(b.jsx)(S.a.Group,{children:n}),Object(b.jsx)(N.a.Toggle,{type:"submit",as:_.a,eventKey:"0",children:"Apply Filters"})]})})})]})})}),Object(b.jsx)("div",{className:"col",id:"addswipebuttoncol",children:Object(b.jsx)(_.a,{className:"btn-block",href:"/#/addswipe",id:"addswipebutton",children:"Add Swipe"})})]})}),Object(b.jsx)("div",{className:"container",children:0===t.length?"loading":t})]})}}]),n}(i.Component),C=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={swipe:{}},i}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=window.location.hash.split("/"),n=t[t.length-1];fetch("https://swipemein.herokuapp.com/getswipe?id="+n).then((function(e){return e.json()})).then((function(t){e.setState({swipe:t})}))}},{key:"render",value:function(){if(!p.isLoggedIn())return p.redirectLogin();var e=this.state.swipe;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f,{}),Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("div",{className:"col-xs-4",children:0===Object.entries(e).length?"loading":Object(b.jsx)(v.a,{children:Object(b.jsxs)(v.a.Body,{children:[Object(b.jsx)(v.a.Title,{children:e.location}),Object(b.jsx)(v.a.Subtitle,{children:u(e.swipeTime)}),Object(b.jsxs)("ul",{children:[Object(b.jsxs)("li",{children:["Owner: ",e.ownedBy.firstName]}),Object(b.jsxs)("li",{children:["Status: ",e.active?"Active":"Inactive"]})]}),Object(b.jsx)(_.a,{children:"Claim Swipe"})]})})})})]})}}]),n}(i.Component),D=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"submitForm",value:function(e){e.preventDefault(),document.getElementById("submitbutton").disabled=!0;var t={};if(["swipedininghall","swipedate","swipetime"].forEach((function(e){t[e]=document.getElementById(e).value})),""!==t.swipedate)if(""!==t.swipetime){var n=Date.parse(t.swipedate+"T"+t.swipetime),i={active:!0,claimedBy:null,location:t.swipedininghall,ownedBy:null,swipeTime:n};fetch("https://swipemein.herokuapp.com/addswipe?data="+JSON.stringify(i),{method:"POST"}).then((function(e){console.log(e.status),500===e.status?alert("Internal 500 error: couldn't add swipe."):200===e.status?alert("Swipe added successfully!"):alert("Unknown response status: "+e.status),document.getElementById("submitbutton").disabled=!1}))}else alert("Please enter the time of your swipe.");else alert("Please enter the date of your swipe.")}},{key:"render",value:function(){if(!p.isLoggedIn())return p.redirectLogin();var e=k.map((function(e){return Object(b.jsx)("option",{children:e},e)}));return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f,{}),Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("h1",{className:"pagetitle",children:"Add Swipe"})}),Object(b.jsx)("div",{className:"container",children:Object(b.jsx)(v.a,{children:Object(b.jsx)(v.a.Body,{children:Object(b.jsxs)(S.a,{onSubmit:this.submitForm,id:"swipeform",children:[Object(b.jsxs)(S.a.Group,{children:[Object(b.jsx)(S.a.Label,{children:"Location"}),Object(b.jsx)(S.a.Control,{as:"select",id:"swipedininghall",children:e})]}),Object(b.jsxs)(S.a.Row,{children:[Object(b.jsx)("div",{className:"col-xs-4",children:Object(b.jsxs)(S.a.Group,{children:[Object(b.jsx)(S.a.Label,{children:"Day"}),Object(b.jsx)(S.a.Control,{type:"date",id:"swipedate"})]})}),Object(b.jsx)("div",{className:"col-xs-4",children:Object(b.jsxs)(S.a.Group,{children:[Object(b.jsx)(S.a.Label,{children:"Time"}),Object(b.jsx)(S.a.Control,{type:"time",id:"swipetime"})]})})]}),Object(b.jsx)(_.a,{type:"submit",id:"submitbutton",children:"Submit"})]})})})})]})}}]),n}(i.Component),I=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(f,{}),Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("h1",{className:"pagetitle",children:"Error 404: Page not found"})})]})}}]),n}(i.Component);var L=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(a.a,{basename:"",children:Object(b.jsxs)(r.d,{children:[Object(b.jsx)(r.b,{exact:!0,path:"/",render:function(){return Object(b.jsx)(w,{})}}),Object(b.jsx)(r.b,{exact:!0,path:"/profile",render:function(){return Object(b.jsx)(y,{})}}),Object(b.jsx)(r.b,{exact:!0,path:"/dashboard",render:function(){return Object(b.jsx)(E,{})}}),Object(b.jsx)(r.b,{exact:!0,path:"/swipeinfo/:id",render:function(){return Object(b.jsx)(C,{})}}),Object(b.jsx)(r.b,{exact:!0,path:"/addswipe",render:function(){return Object(b.jsx)(D,{})}}),Object(b.jsx)(r.b,{path:"*",exact:!0,render:function(){return Object(b.jsx)(I,{})}})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(b.jsx)(L,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.57453255.chunk.js.map