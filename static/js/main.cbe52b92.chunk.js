(this.webpackJsonpswipemein=this.webpackJsonpswipemein||[]).push([[0],{64:function(e,t,n){},71:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var i=n(1),c=n(36),a=n.n(c),s=(n(64),n(40)),r=n(14),o=n(6),l=n(8),j=n(12),d=n(13),u=n(0),h=n.n(u),b=n(4),p=n(38),O=n(55),m=n(2);Object(O.a)({apiKey:"AIzaSyDAVAezS1NPeLwvjW_Ldx3NYbSsWzdTGPg",authDomain:"swipemein-storage.firebaseapp.com",projectId:"swipemein-storage",storageBucket:"swipemein-storage.appspot.com",messagingSenderId:"810938213396",appId:"1:810938213396:web:44f1aff1b0f0b3a3553301",measurementId:"G-E7QJK7RDFJ"});var x=Object(p.b)(),f=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,null,[{key:"createProfile",value:function(){var t=Object(b.a)(h.a.mark((function t(n,i){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.a)(x,n,i).then((function(t){var n=t._tokenResponse.idToken;e.storeToken(n)})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"logIn",value:function(){var t=Object(b.a)(h.a.mark((function t(n,i){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.c)(x,n,i).then((function(t){var n=t._tokenResponse.idToken;e.storeToken(n)})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"logOut",value:function(){Object(p.d)(x).then((function(){e.removeToken()})).catch((function(e){console.log("error signing out")}))}},{key:"isLoggedIn",value:function(){return void 0!==e.getToken()&&null!==e.getToken()}},{key:"storeToken",value:function(e){localStorage.setItem("idToken",e)}},{key:"removeToken",value:function(){localStorage.removeItem("idToken")}},{key:"getToken",value:function(){return localStorage.getItem("idToken")}},{key:"redirectLogin",value:function(){return Object(m.jsx)(r.a,{to:"/login",exact:!0})}}]),e}(),v=n(77),g=n(78),w=(n(26),n(71),function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e;return e=f.isLoggedIn()?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(v.a.Link,{href:"/#/dashboard",children:"Dashboard"}),Object(m.jsx)(v.a.Link,{href:"/#/profile",children:"Profile"}),Object(m.jsx)(v.a.Link,{href:"/",onClick:function(){return f.logOut()},children:"Logout"})]}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(v.a.Link,{href:"/#/login",children:"Login"})}),Object(m.jsxs)(g.a,{children:[Object(m.jsx)(g.a.Brand,{href:"/",children:"SwipeMeIn"}),Object(m.jsx)(g.a.Collapse,{children:Object(m.jsx)(v.a,{className:"ml-auto",children:e})})]})}}]),n}(i.Component)),y=n(80),k=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(e){var i;Object(o.a)(this,n),i=t.call(this,e);var c=window.location.href;if(c.includes("code")&&null===localStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SUB_ID)){var a=c.split("?")[1].split("#")[0].split("=")[1];f.login(a)}return i}return Object(l.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(w,{}),Object(m.jsxs)("div",{className:"container-fluid homephotos",children:[Object(m.jsx)("div",{className:"hometitle container",children:Object(m.jsx)("h2",{children:"SwipeMeIn"})}),Object(m.jsx)("div",{className:"homeinfo container-fluid",children:Object(m.jsxs)("div",{className:"col-xs-4 homedescription",children:[Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("h3",{children:"What is SwipeMeIn?"})}),Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("p",{children:"We\u2019ve all been there: it\u2019s 7 PM, you\u2019re on campus, and you\u2019re hungry. You have two options: spend an absurd amount of money for on-campus dining or ask a friend to lend you a swipe."}),Object(m.jsx)("p",{children:"With meal plan minimums increasing and limited swipe donation programs to take advantage of, countless students end each year with extra swipes that are wasted. SwipeMeIn is a platform for those with extra swipes to make the most of their surplus and the hungry to score a free meal."})]}),Object(m.jsxs)("div",{className:"homedirections row container",children:[Object(m.jsx)("div",{className:"col",children:Object(m.jsx)(N,{title:"Log in",text:"Log in using your kerberos in OIDC."})}),Object(m.jsx)("div",{className:"col",children:Object(m.jsx)(N,{title:"Add/Claim a Swipe",text:"Say where and when you'll eat, or find a place and time that works for your stomach."})}),Object(m.jsx)("div",{className:"col",children:Object(m.jsx)(N,{title:"Get Swiped!",text:"Eat!"})})]})]})})]})]})}}]),n}(i.Component),N=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(m.jsx)(y.a,{children:Object(m.jsxs)(y.a.Body,{children:[Object(m.jsx)(y.a.Title,{children:this.props.title}),Object(m.jsx)(y.a.Text,{children:this.props.text})]})})}}]),n}(i.Component),S=n(76),T=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={student:{},ownedSwipes:null,claimedSwipes:null},i}return Object(l.a)(n,[{key:"render",value:function(){var e,t;if(!f.isLoggedIn())return f.redirectLogin();var n=this.state.student;return Object(m.jsxs)("div",{children:[Object(m.jsx)(w,{}),Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("h1",{className:"pagetitle",children:"Profile"})}),Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("h5",{children:"Info"}),Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)(S.a,{children:[Object(m.jsxs)(S.a.Group,{children:[Object(m.jsx)(S.a.Label,{children:"Name:"}),Object(m.jsx)(S.a.Control,{placeholder:n.name})]}),Object(m.jsxs)(S.a.Group,{children:[Object(m.jsx)(S.a.Label,{children:"Email:"}),Object(m.jsx)(S.a.Control,{type:"email",placeholder:n.email})]})]})}),Object(m.jsxs)("div",{className:"container row",id:"profilefooter",children:[Object(m.jsxs)("div",{className:"col-xs-4",children:[Object(m.jsx)("h5",{children:"Your swipes"}),Object(m.jsx)("div",{className:"container",children:null!==(e=this.state.ownedSwipes)&&void 0!==e?e:"None"})]}),Object(m.jsxs)("div",{className:"col-xs-4",children:[Object(m.jsx)("h5",{children:"Swipes you've claimed"}),Object(m.jsx)("div",{className:"container",children:null!==(t=this.state.claimedSwipes)&&void 0!==t?t:"None"})]})]})]})})]})}}]),n}(i.Component),L=n(75),C=function(e){var t=new Date(1e3*e);return t.toLocaleDateString()+", "+t.toLocaleTimeString()},I=function(e){return e.sort((function(e,t){return e.swipeTime-t.swipeTime}))},E=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={swipe:i.props.swipe},i}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.swipe;return Object(m.jsx)("div",{className:"swipecard container",children:Object(m.jsx)("div",{className:"col-xs-4",children:Object(m.jsx)(y.a,{children:Object(m.jsxs)(y.a.Body,{children:[Object(m.jsx)(y.a.Title,{children:e.location}),Object(m.jsx)(y.a.Subtitle,{children:C(e.swipeTime)}),Object(m.jsx)(y.a.Text,{}),Object(m.jsx)(L.a,{children:"Claim Swipe"}),Object(m.jsx)(y.a.Link,{href:"/#/swipeinfo/"+e.id,children:"Info"})]})})})})}}]),n}(i.Component),B=["Maseeh","McCormick","Baker","Next","Simmons","New Vassar"],D=n(79),P=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={swipes:[]},i}return Object(l.a)(n,[{key:"getFilteredResults",value:function(e){e.preventDefault();var t={locations:[]};B.forEach((function(e){document.getElementById(e).checked&&t.locations.push(e)})),this.getSwipes(t)}},{key:"getSwipes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};fetch("https://swipemein.herokuapp.com/getswipes?filters="+JSON.stringify(t),{headers:{"Content-Type":"application/json",Authorization:f.getToken()}}).then((function(e){return e.json()})).then((function(t){var n=I(Object.values(t)).map((function(e){return Object(m.jsx)(E,{swipe:e},e.id)}));e.setState({swipes:n})}))}},{key:"makeCheckboxes",value:function(e){var t=[];return e.forEach((function(e){t.push(Object(m.jsx)(S.a.Check,{type:"checkbox",label:e,id:e,name:e,defaultChecked:!0},e))})),t}},{key:"componentDidMount",value:function(){this.getSwipes()}},{key:"render",value:function(){var e=this;if(!f.isLoggedIn())return f.redirectLogin();var t=this.state.swipes,n=this.makeCheckboxes(B);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(w,{}),Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("h1",{className:"pagetitle",children:"Swipe Dashboard"})}),Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"row container",id:"middashboard",children:[Object(m.jsx)("div",{className:"col",children:Object(m.jsx)(D.a,{children:Object(m.jsxs)(y.a,{children:[Object(m.jsx)(y.a.Header,{children:Object(m.jsx)(D.a.Toggle,{as:L.a,eventKey:"0",children:"Filters"})}),Object(m.jsx)(D.a.Collapse,{eventKey:"0",children:Object(m.jsx)(y.a.Body,{children:Object(m.jsxs)(S.a,{onSubmit:function(t){return e.getFilteredResults(t)},id:"filterform",name:"filterform",children:[Object(m.jsx)("h2",{children:"Dining Halls:"}),Object(m.jsx)(S.a.Group,{children:n}),Object(m.jsx)(D.a.Toggle,{type:"submit",as:L.a,eventKey:"0",children:"Apply Filters"})]})})})]})})}),Object(m.jsx)("div",{className:"col",id:"addswipebuttoncol",children:Object(m.jsx)(L.a,{className:"btn-block",href:"/#/addswipe",id:"addswipebutton",children:"Add Swipe"})})]})}),Object(m.jsx)("div",{className:"container",children:0===t.length?"loading":t})]})}}]),n}(i.Component),F=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={swipe:{}},i}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=window.location.hash.split("/"),n=t[t.length-1];fetch("https://swipemein.herokuapp.com/getswipe?id="+n,{headers:{"Content-Type":"application/json",Authorization:f.getToken()}}).then((function(e){return e.json()})).then((function(t){e.setState({swipe:t})}))}},{key:"render",value:function(){if(!f.isLoggedIn())return f.redirectLogin();var e=this.state.swipe;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(w,{}),Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("div",{className:"col-xs-4",children:0===Object.entries(e).length?"loading":Object(m.jsx)(y.a,{children:Object(m.jsxs)(y.a.Body,{children:[Object(m.jsx)(y.a.Title,{children:e.location}),Object(m.jsx)(y.a.Subtitle,{children:C(e.swipeTime)}),Object(m.jsxs)("ul",{children:[Object(m.jsxs)("li",{children:["Owner: ",e.ownedBy.firstName]}),Object(m.jsxs)("li",{children:["Status: ",e.active?"Active":"Inactive"]})]}),Object(m.jsx)(L.a,{children:"Claim Swipe"})]})})})})]})}}]),n}(i.Component),A=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"submitForm",value:function(e){e.preventDefault(),document.getElementById("submitbutton").disabled=!0;var t={};if(["swipedininghall","swipedate","swipetime"].forEach((function(e){t[e]=document.getElementById(e).value})),""!==t.swipedate)if(""!==t.swipetime){var n=Date.parse(t.swipedate+"T"+t.swipetime),i={active:!0,claimedBy:null,location:t.swipedininghall,ownedBy:null,swipeTime:n};fetch("https://swipemein.herokuapp.com/addswipe?data="+JSON.stringify(i),{method:"POST",headers:{"Content-Type":"application/json",Authorization:f.getToken()}}).then((function(e){console.log(e.status),500===e.status?alert("Internal 500 error: couldn't add swipe."):200===e.status?alert("Swipe added successfully!"):alert("Unknown response status: "+e.status),document.getElementById("submitbutton").disabled=!1}))}else alert("Please enter the time of your swipe.");else alert("Please enter the date of your swipe.")}},{key:"render",value:function(){if(!f.isLoggedIn())return f.redirectLogin();var e=B.map((function(e){return Object(m.jsx)("option",{children:e},e)}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(w,{}),Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("h1",{className:"pagetitle",children:"Add Swipe"})}),Object(m.jsx)("div",{className:"container",children:Object(m.jsx)(y.a,{children:Object(m.jsx)(y.a.Body,{children:Object(m.jsxs)(S.a,{onSubmit:this.submitForm,id:"swipeform",children:[Object(m.jsxs)(S.a.Group,{children:[Object(m.jsx)(S.a.Label,{children:"Location"}),Object(m.jsx)(S.a.Control,{as:"select",id:"swipedininghall",children:e})]}),Object(m.jsxs)(S.a.Row,{children:[Object(m.jsx)("div",{className:"col-xs-4",children:Object(m.jsxs)(S.a.Group,{children:[Object(m.jsx)(S.a.Label,{children:"Day"}),Object(m.jsx)(S.a.Control,{type:"date",id:"swipedate"})]})}),Object(m.jsx)("div",{className:"col-xs-4",children:Object(m.jsxs)(S.a.Group,{children:[Object(m.jsx)(S.a.Label,{children:"Time"}),Object(m.jsx)(S.a.Control,{type:"time",id:"swipetime"})]})})]}),Object(m.jsx)(L.a,{type:"submit",id:"submitbutton",children:"Submit"})]})})})})]})}}]),n}(i.Component),_=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(w,{}),Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("h1",{className:"pagetitle",children:"Error 404: Page not found"})})]})}}]),n}(i.Component),G=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"submitLogin",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("login-email").value,n=document.getElementById("login-pw").value,e.next=4,f.logIn(t,n);case 4:this.props.history.push("/dashboard");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"submitSignup",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("signup-email").value,n=document.getElementById("signup-pw").value,e.next=4,f.createProfile(t,n);case 4:this.props.history.push("/dashboard");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return f.isLoggedIn()?Object(m.jsx)(r.a,{to:"/dashboard"}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(w,{}),Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("h1",{className:"pagetitle",children:"Login"})}),Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("h5",{children:"Log in"}),Object(m.jsx)("div",{className:"loginform",children:Object(m.jsxs)(S.a,{children:[Object(m.jsxs)(S.a.Group,{children:[Object(m.jsx)(S.a.Label,{children:"Email:"}),Object(m.jsx)(S.a.Control,{id:"login-email",placeholder:"<kerb>@mit.edu",type:"email"})]}),Object(m.jsxs)(S.a.Group,{children:[Object(m.jsx)(S.a.Label,{children:"Password:"}),Object(m.jsx)(S.a.Control,{id:"login-pw",placeholder:"Password",type:"password"})]}),Object(m.jsx)(L.a,{onClick:function(){return e.submitLogin()},children:"Log In"})]})}),Object(m.jsx)("br",{}),Object(m.jsx)("h5",{children:"Sign Up"}),Object(m.jsx)("div",{className:"loginform",children:Object(m.jsxs)(S.a,{children:[Object(m.jsxs)(S.a.Group,{children:[Object(m.jsx)(S.a.Label,{children:"Email:"}),Object(m.jsx)(S.a.Control,{id:"signup-email",placeholder:"<kerb>@mit.edu",type:"email"})]}),Object(m.jsxs)(S.a.Group,{children:[Object(m.jsx)(S.a.Label,{children:"Password:"}),Object(m.jsx)(S.a.Control,{id:"signup-pw",placeholder:"Password",type:"password"})]}),Object(m.jsx)(L.a,{onClick:function(){return e.submitSignup()},children:"Sign Up"})]})})]})]})}}]),n}(i.Component),R=Object(r.g)(G);var W=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(s.a,{basename:"",children:Object(m.jsxs)(r.d,{children:[Object(m.jsx)(r.b,{exact:!0,path:"/",render:function(){return Object(m.jsx)(k,{})}}),Object(m.jsx)(r.b,{exact:!0,path:"/profile",render:function(){return Object(m.jsx)(T,{})}}),Object(m.jsx)(r.b,{exact:!0,path:"/dashboard",render:function(){return Object(m.jsx)(P,{})}}),Object(m.jsx)(r.b,{exact:!0,path:"/swipeinfo/:id",render:function(){return Object(m.jsx)(F,{})}}),Object(m.jsx)(r.b,{exact:!0,path:"/addswipe",render:function(){return Object(m.jsx)(A,{})}}),Object(m.jsx)(r.b,{exact:!0,path:"/login",render:function(){return Object(m.jsx)(R,{})}}),Object(m.jsx)(r.b,{path:"*",exact:!0,render:function(){return Object(m.jsx)(_,{})}})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(Object(m.jsx)(W,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[73,1,2]]]);
//# sourceMappingURL=main.cbe52b92.chunk.js.map