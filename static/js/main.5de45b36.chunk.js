(this.webpackJsonpswipemein=this.webpackJsonpswipemein||[]).push([[0],{64:function(e,t,n){},71:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n(36),c=n.n(a),s=(n(64),n(40)),r=n(14),o=n(6),l=n(8),d=n(12),j=n(13),u=n(0),h=n.n(u),b=n(3),p=function(e){var t=new Date(1e3*e);return t.toLocaleDateString()+", "+t.toLocaleTimeString()},O=function(e){return e.sort((function(e,t){return e.swipeTime-t.swipeTime}))},m=n(38),x=n(55),f=n(2);Object(x.a)({apiKey:"AIzaSyDAVAezS1NPeLwvjW_Ldx3NYbSsWzdTGPg",authDomain:"swipemein-storage.firebaseapp.com",projectId:"swipemein-storage",storageBucket:"swipemein-storage.appspot.com",messagingSenderId:"810938213396",appId:"1:810938213396:web:44f1aff1b0f0b3a3553301",measurementId:"G-E7QJK7RDFJ"});var v=Object(m.b)(),g=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,null,[{key:"createProfile",value:function(){var t=Object(b.a)(h.a.mark((function t(n,i){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.a)(v,n,i).then((function(t){var n=t._tokenResponse.idToken;e.storeToken(n),fetch("https://swipemein.herokuapp.com/addUser",{method:"POST",headers:{"Content-Type":"application/json",Authorization:e.getToken()}}).catch((function(e){alert("Error inserting into database.")}))})).catch((function(e){alert("Error creating user.")}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"logIn",value:function(){var t=Object(b.a)(h.a.mark((function t(n,i){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.c)(v,n,i).then((function(t){var n=t._tokenResponse.idToken;e.storeToken(n)})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"logOut",value:function(){Object(m.d)(v).then((function(){e.removeToken()})).catch((function(e){console.log("error signing out")}))}},{key:"isLoggedIn",value:function(){return void 0!==e.getToken()&&null!==e.getToken()}},{key:"storeToken",value:function(e){localStorage.setItem("idToken",e)}},{key:"removeToken",value:function(){localStorage.removeItem("idToken")}},{key:"getToken",value:function(){return localStorage.getItem("idToken")}},{key:"redirectLogin",value:function(){return Object(f.jsx)(r.a,{to:"/login",exact:!0})}}]),e}(),w=n(77),y=n(78),k=(n(26),n(71),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e;return e=g.isLoggedIn()?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(w.a.Link,{href:"/#/dashboard",children:"Dashboard"}),Object(f.jsx)(w.a.Link,{href:"/#/profile",children:"Profile"}),Object(f.jsx)(w.a.Link,{href:"/",onClick:function(){return g.logOut()},children:"Logout"})]}):Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(w.a.Link,{href:"/#/login",children:"Login"})}),Object(f.jsxs)(y.a,{children:[Object(f.jsx)(y.a.Brand,{href:"/",children:"SwipeMeIn"}),Object(f.jsx)(y.a.Collapse,{children:Object(f.jsx)(w.a,{className:"ml-auto",children:e})})]})}}]),n}(i.Component)),S=n(80),N=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var i;Object(o.a)(this,n),i=t.call(this,e);var a=window.location.href;if(a.includes("code")&&null===localStorage.getItem(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SUB_ID)){var c=a.split("?")[1].split("#")[0].split("=")[1];g.login(c)}return i}return Object(l.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)(k,{}),Object(f.jsxs)("div",{className:"container-fluid homephotos",children:[Object(f.jsx)("div",{className:"hometitle container",children:Object(f.jsx)("h2",{children:"SwipeMeIn"})}),Object(f.jsx)("div",{className:"homeinfo container-fluid",children:Object(f.jsxs)("div",{className:"col-xs-4 homedescription",children:[Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("h3",{children:"What is SwipeMeIn?"})}),Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("p",{children:"We\u2019ve all been there: it\u2019s 7 PM, you\u2019re on campus, and you\u2019re hungry. You have two options: spend an absurd amount of money for on-campus dining or ask a friend to lend you a swipe."}),Object(f.jsx)("p",{children:"With meal plan minimums increasing and limited swipe donation programs to take advantage of, countless students end each year with extra swipes that are wasted. SwipeMeIn is a platform for those with extra swipes to make the most of their surplus and the hungry to score a free meal."})]}),Object(f.jsxs)("div",{className:"homedirections row container",children:[Object(f.jsx)("div",{className:"col",children:Object(f.jsx)(T,{title:"Log in",text:"Log in using your kerberos in OIDC."})}),Object(f.jsx)("div",{className:"col",children:Object(f.jsx)(T,{title:"Add/Claim a Swipe",text:"Say where and when you'll eat, or find a place and time that works for your stomach."})}),Object(f.jsx)("div",{className:"col",children:Object(f.jsx)(T,{title:"Get Swiped!",text:"Eat!"})})]})]})})]})]})}}]),n}(i.Component),T=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(f.jsx)(S.a,{children:Object(f.jsxs)(S.a.Body,{children:[Object(f.jsx)(S.a.Title,{children:this.props.title}),Object(f.jsx)(S.a.Text,{children:this.props.text})]})})}}]),n}(i.Component),C=n(76),L=n(75),I=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={name:"",email:"",socialPreference:"",passwordButtonText:"Submit New Password",profileButtonText:"Submit Profile Changes",ownedSwipes:null,claimedSwipes:null},i}return Object(l.a)(n,[{key:"updateProfile",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,n,i=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.getElementById("nameinput").value,n=document.getElementById("socialpreferenceinput").value,fetch("https://swipemein.herokuapp.com/updateUser",{method:"POST",headers:{"Content-Type":"application/json",Authorization:g.getToken()},body:JSON.stringify({firstName:t,socialPreference:n})}).then((function(){i.setState({profileButtonText:"Profile Change Successful!"})})).catch((function(e){alert("Error changing profile.")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"changePassword",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,n,i=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.getElementById("newpassword"),n=t.value,fetch("https://swipemein.herokuapp.com/changePassword",{method:"POST",headers:{"Content-Type":"application/json",Authorization:g.getToken()},body:JSON.stringify({newPassword:n})}).then((function(){t.value="",i.setState({passwordButtonText:"Password Change Successful!"})})).catch((function(){alert("Error changing password.")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;fetch("https://swipemein.herokuapp.com/getUser",{method:"GET",headers:{"Content-Type":"application/json",Authorization:g.getToken()}}).then((function(e){return e.json()})).then((function(t){var n=t.userData;e.setState({name:n.firstName,email:n.email,socialPreference:n.socialPreference})}))}},{key:"render",value:function(){var e,t,n=this;return g.isLoggedIn()?Object(f.jsxs)("div",{children:[Object(f.jsx)(k,{}),Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("h1",{className:"pagetitle",children:"Profile"})}),Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("h5",{children:"Info"}),Object(f.jsxs)("div",{className:"container",children:[Object(f.jsxs)(C.a.Group,{children:[Object(f.jsx)(C.a.Label,{children:"Name:"}),Object(f.jsx)(C.a.Control,{id:"nameinput",type:"text",defaultValue:this.state.name})]}),Object(f.jsxs)(C.a.Group,{children:[Object(f.jsx)(C.a.Label,{children:"Email:"}),Object(f.jsx)(C.a.Control,{type:"email",placeholder:this.state.email,disabled:!0})]}),Object(f.jsxs)(C.a.Group,{children:[Object(f.jsx)(C.a.Label,{children:"Social Preferences:"}),Object(f.jsx)(C.a.Control,{id:"socialpreferenceinput",type:"text",defaultValue:this.state.socialPreference})]}),Object(f.jsx)(L.a,{onClick:function(){return n.updateProfile()},children:this.state.profileButtonText})]}),Object(f.jsx)("br",{}),Object(f.jsx)("h5",{children:"Change Password"}),Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(C.a.Group,{children:Object(f.jsx)(C.a.Control,{id:"newpassword",type:"password",placeholder:"New Password"})}),Object(f.jsx)(L.a,{onClick:function(){return n.changePassword()},children:this.state.passwordButtonText})]}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"container row",id:"profilefooter",children:[Object(f.jsxs)("div",{className:"col-xs-4",children:[Object(f.jsx)("h5",{children:"Your swipes"}),Object(f.jsx)("div",{className:"container",children:null!==(e=this.state.ownedSwipes)&&void 0!==e?e:"None"})]}),Object(f.jsxs)("div",{className:"col-xs-4",children:[Object(f.jsx)("h5",{children:"Swipes you've claimed"}),Object(f.jsx)("div",{className:"container",children:null!==(t=this.state.claimedSwipes)&&void 0!==t?t:"None"})]})]})]})})]}):g.redirectLogin()}}]),n}(i.Component),P=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={swipe:i.props.swipe},i}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.swipe;return Object(f.jsx)("div",{className:"swipecard container",children:Object(f.jsx)("div",{className:"col-xs-4",children:Object(f.jsx)(S.a,{children:Object(f.jsxs)(S.a.Body,{children:[Object(f.jsx)(S.a.Title,{children:e.location}),Object(f.jsx)(S.a.Subtitle,{children:p(e.swipeTime)}),Object(f.jsx)(S.a.Text,{}),Object(f.jsx)(L.a,{children:"Claim Swipe"}),Object(f.jsx)(S.a.Link,{href:"/#/swipeinfo/"+e.id,children:"Info"})]})})})})}}]),n}(i.Component),E=["Maseeh","McCormick","Baker","Next","Simmons","New Vassar"],B=n(79),D=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={swipes:[]},i}return Object(l.a)(n,[{key:"getFilteredResults",value:function(e){e.preventDefault();var t={locations:[]};E.forEach((function(e){document.getElementById(e).checked&&t.locations.push(e)})),this.getSwipes(t)}},{key:"getSwipes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};fetch("https://swipemein.herokuapp.com/getswipes?filters="+JSON.stringify(t),{headers:{"Content-Type":"application/json",Authorization:g.getToken()}}).then((function(e){return e.json()})).then((function(t){var n=O(Object.values(t)).map((function(e){return Object(f.jsx)(P,{swipe:e},e.id)}));e.setState({swipes:n})}))}},{key:"makeCheckboxes",value:function(e){var t=[];return e.forEach((function(e){t.push(Object(f.jsx)(C.a.Check,{type:"checkbox",label:e,id:e,name:e,defaultChecked:!0},e))})),t}},{key:"componentDidMount",value:function(){this.getSwipes()}},{key:"render",value:function(){var e=this;if(!g.isLoggedIn())return g.redirectLogin();var t=this.state.swipes,n=this.makeCheckboxes(E);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(k,{}),Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("h1",{className:"pagetitle",children:"Swipe Dashboard"})}),Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"row container",id:"middashboard",children:[Object(f.jsx)("div",{className:"col",children:Object(f.jsx)(B.a,{children:Object(f.jsxs)(S.a,{children:[Object(f.jsx)(S.a.Header,{children:Object(f.jsx)(B.a.Toggle,{as:L.a,eventKey:"0",children:"Filters"})}),Object(f.jsx)(B.a.Collapse,{eventKey:"0",children:Object(f.jsx)(S.a.Body,{children:Object(f.jsxs)(C.a,{onSubmit:function(t){return e.getFilteredResults(t)},id:"filterform",name:"filterform",children:[Object(f.jsx)("h2",{children:"Dining Halls:"}),Object(f.jsx)(C.a.Group,{children:n}),Object(f.jsx)(B.a.Toggle,{type:"submit",as:L.a,eventKey:"0",children:"Apply Filters"})]})})})]})})}),Object(f.jsx)("div",{className:"col",id:"addswipebuttoncol",children:Object(f.jsx)(L.a,{className:"btn-block",href:"/#/addswipe",id:"addswipebutton",children:"Add Swipe"})})]})}),Object(f.jsx)("div",{className:"container",children:0===t.length?"loading":t})]})}}]),n}(i.Component),A=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={swipe:{}},i}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=window.location.hash.split("/"),n=t[t.length-1];fetch("https://swipemein.herokuapp.com/getswipe?id="+n,{headers:{"Content-Type":"application/json",Authorization:g.getToken()}}).then((function(e){return e.json()})).then((function(t){e.setState({swipe:t})}))}},{key:"render",value:function(){if(!g.isLoggedIn())return g.redirectLogin();var e=this.state.swipe;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(k,{}),Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("div",{className:"col-xs-4",children:0===Object.entries(e).length?"loading":Object(f.jsx)(S.a,{children:Object(f.jsxs)(S.a.Body,{children:[Object(f.jsx)(S.a.Title,{children:e.location}),Object(f.jsx)(S.a.Subtitle,{children:p(e.swipeTime)}),Object(f.jsxs)("ul",{children:[Object(f.jsxs)("li",{children:["Owner: ",e.ownedBy.firstName]}),Object(f.jsxs)("li",{children:["Status: ",e.active?"Active":"Inactive"]})]}),Object(f.jsx)(L.a,{children:"Claim Swipe"})]})})})})]})}}]),n}(i.Component),F=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"submitForm",value:function(e){e.preventDefault(),document.getElementById("submitbutton").disabled=!0;var t={};if(["swipedininghall","swipedate","swipetime"].forEach((function(e){t[e]=document.getElementById(e).value})),""!==t.swipedate)if(""!==t.swipetime){var n=Date.parse(t.swipedate+"T"+t.swipetime),i={active:!0,claimedBy:null,location:t.swipedininghall,ownedBy:null,swipeTime:n};fetch("https://swipemein.herokuapp.com/addswipe?data="+JSON.stringify(i),{method:"POST",headers:{"Content-Type":"application/json",Authorization:g.getToken()}}).then((function(e){console.log(e.status),500===e.status?alert("Internal 500 error: couldn't add swipe."):200===e.status?alert("Swipe added successfully!"):alert("Unknown response status: "+e.status),document.getElementById("submitbutton").disabled=!1}))}else alert("Please enter the time of your swipe.");else alert("Please enter the date of your swipe.")}},{key:"render",value:function(){if(!g.isLoggedIn())return g.redirectLogin();var e=E.map((function(e){return Object(f.jsx)("option",{children:e},e)}));return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(k,{}),Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("h1",{className:"pagetitle",children:"Add Swipe"})}),Object(f.jsx)("div",{className:"container",children:Object(f.jsx)(S.a,{children:Object(f.jsx)(S.a.Body,{children:Object(f.jsxs)(C.a,{onSubmit:this.submitForm,id:"swipeform",children:[Object(f.jsxs)(C.a.Group,{children:[Object(f.jsx)(C.a.Label,{children:"Location"}),Object(f.jsx)(C.a.Control,{as:"select",id:"swipedininghall",children:e})]}),Object(f.jsxs)(C.a.Row,{children:[Object(f.jsx)("div",{className:"col-xs-4",children:Object(f.jsxs)(C.a.Group,{children:[Object(f.jsx)(C.a.Label,{children:"Day"}),Object(f.jsx)(C.a.Control,{type:"date",id:"swipedate"})]})}),Object(f.jsx)("div",{className:"col-xs-4",children:Object(f.jsxs)(C.a.Group,{children:[Object(f.jsx)(C.a.Label,{children:"Time"}),Object(f.jsx)(C.a.Control,{type:"time",id:"swipetime"})]})})]}),Object(f.jsx)(L.a,{type:"submit",id:"submitbutton",children:"Submit"})]})})})})]})}}]),n}(i.Component),G=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)(k,{}),Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("h1",{className:"pagetitle",children:"Error 404: Page not found"})})]})}}]),n}(i.Component),_=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"submitLogin",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("login-email").value,n=document.getElementById("login-pw").value,e.next=4,g.logIn(t,n);case 4:this.props.history.push("/dashboard");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"submitSignup",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("signup-email").value,n=document.getElementById("signup-pw").value,e.next=4,g.createProfile(t,n);case 4:this.props.history.push("/dashboard");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return g.isLoggedIn()?Object(f.jsx)(r.a,{to:"/dashboard"}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(k,{}),Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("h1",{className:"pagetitle",children:"Login"})}),Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("h5",{children:"Log in"}),Object(f.jsx)("div",{className:"loginform",children:Object(f.jsxs)(C.a,{children:[Object(f.jsxs)(C.a.Group,{children:[Object(f.jsx)(C.a.Label,{children:"Email:"}),Object(f.jsx)(C.a.Control,{id:"login-email",placeholder:"<kerb>@mit.edu",type:"email"})]}),Object(f.jsxs)(C.a.Group,{children:[Object(f.jsx)(C.a.Label,{children:"Password:"}),Object(f.jsx)(C.a.Control,{id:"login-pw",placeholder:"Password",type:"password"})]}),Object(f.jsx)(L.a,{onClick:function(){return e.submitLogin()},children:"Log In"})]})}),Object(f.jsx)("br",{}),Object(f.jsx)("h5",{children:"Sign Up"}),Object(f.jsx)("div",{className:"loginform",children:Object(f.jsxs)(C.a,{children:[Object(f.jsxs)(C.a.Group,{children:[Object(f.jsx)(C.a.Label,{children:"Email:"}),Object(f.jsx)(C.a.Control,{id:"signup-email",placeholder:"<kerb>@mit.edu",type:"email"})]}),Object(f.jsxs)(C.a.Group,{children:[Object(f.jsx)(C.a.Label,{children:"Password:"}),Object(f.jsx)(C.a.Control,{id:"signup-pw",placeholder:"Password",type:"password"})]}),Object(f.jsx)(L.a,{onClick:function(){return e.submitSignup()},children:"Sign Up"})]})})]})]})}}]),n}(i.Component),R=Object(r.g)(_);var z=function(){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(s.a,{basename:"",children:Object(f.jsxs)(r.d,{children:[Object(f.jsx)(r.b,{exact:!0,path:"/",render:function(){return Object(f.jsx)(N,{})}}),Object(f.jsx)(r.b,{exact:!0,path:"/profile",render:function(){return Object(f.jsx)(I,{})}}),Object(f.jsx)(r.b,{exact:!0,path:"/dashboard",render:function(){return Object(f.jsx)(D,{})}}),Object(f.jsx)(r.b,{exact:!0,path:"/swipeinfo/:id",render:function(){return Object(f.jsx)(A,{})}}),Object(f.jsx)(r.b,{exact:!0,path:"/addswipe",render:function(){return Object(f.jsx)(F,{})}}),Object(f.jsx)(r.b,{exact:!0,path:"/login",render:function(){return Object(f.jsx)(R,{})}}),Object(f.jsx)(r.b,{path:"*",exact:!0,render:function(){return Object(f.jsx)(G,{})}})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(f.jsx)(z,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[73,1,2]]]);
//# sourceMappingURL=main.5de45b36.chunk.js.map